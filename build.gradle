allprojects {
	apply plugin: 'java'

	sourceCompatibility = 1.6
	targetCompatibility = 1.6

	repositories {
		mavenCentral()
		jcenter()

		flatDir name: 'TeamCity', dir: TeamCity.replace("~", System.getProperty("user.home"))
	}

	configurations {
		plugin {
			description = "Dependencies included with the plugin"
		}

		compile.extendsFrom(plugin)
	}
}

project(':agent') {
	dependencies {
		compile project(':common')

		compile name: 'common-api'
		compile name: 'agent-api'

		compile 'org.jetbrains:annotations:13.+'
		compile 'log4j:log4j:1.2.+'

		testCompile 'org.testng:testng:+'
		testCompile 'org.mockito:mockito-core:1.+'

		testRuntime 'net.sourceforge.jtds:jtds:1.2.7'
	}

	test {
		useTestNG()
	}
}

project(':server') {
	dependencies {
		plugin project(':common')

		compile name: 'common-api'
		compile name: 'server-api'

		compile 'org.jetbrains:annotations:13.+'
		compile 'log4j:log4j:1.2.+'

		testCompile 'org.testng:testng:+'
		testCompile 'commons-collections:commons-collections:3.2.+'
	}

	test {
		useTestNG()
	}
}
